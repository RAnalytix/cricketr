{
    "contents" : "#########################################################################################################\n#\n# Title : Literacy in India : A DeepR dive\n# Designed and developed by: Tinniam V Ganesh\n# Date : 5 Nov 2015\n# File: server.R\n# More details: https://gigadom.wordpress.com/\n#\n#########################################################################################################\nlibrary(shiny)\n#library(shinyjs)\n#library(devtools)\n#install_github(\"tvganesh/cricketr\")\nlibrary(cricketr)\n\nsource(\"analyzeBatsman.R\")\nsource(\"analyzeBowler.R\")\nsource(\"relBatsmenPerf.R\")\nsource(\"relBowlersPerf.R\")\nsource(\"definitions.R\")\n\n\nshinyServer(function(input, output,session) {\n   \n   \n \n    # Analyze and display batsmen plots\n    output$batsmanPlot <- renderPlot({  \n        # Include the list to display in the drop downs on choice of matchType\n        if(input$matchType == \"Test\"){\n            \n            updateSelectizeInput(session, 'batsman', choices = testBatsman, server = TRUE,selected=input$batsman)\n            updateSelectizeInput(session, 'batsmanFunc', choices = funcs, server = TRUE,selected=input$batsmanFunc)\n            \n        } else if(input$matchType == \"ODI\"){\n            \n            updateSelectizeInput(session, 'batsman', choices = odiBatsman, server = TRUE,selected=input$batsman)\n            updateSelectizeInput(session, 'batsmanFunc', choices = funcsODITT, server = TRUE,selected=input$batsmanFunc)\n        \n        } else {\n            \n            updateSelectizeInput(session, 'batsman', choices = ttBatsman, server = TRUE,selected=input$batsman)\n            updateSelectizeInput(session, 'batsmanFunc', choices = funcsODITT, server = TRUE,selected=input$batsmanFunc)\n        }\n        print(input$batsman)\n        analyzeBatsman(input$batsman,input$batsmanFunc,input$matchType)\n        \n    })\n    \n    # Analyze and display bowler's plots\n    output$bowlerPlot <- renderPlot({  \n        \n        \n        if(input$matchType1 == \"Test\"){\n           \n            updateSelectizeInput(session, 'bowler', choices = testBowler, server = TRUE,selected=input$bowler)\n            updateSelectizeInput(session, 'bowlerFunc', choices = funcs1, server = TRUE,selected=input$bowlerFunc)\n            \n        } else if(input$matchType1 == \"ODI\"){\n            \n            updateSelectizeInput(session, 'bowler', choices = odiBowler, server = TRUE,selected=input$bowler)\n            updateSelectizeInput(session, 'bowlerFunc', choices = funcs1ODI, server = TRUE,selected=input$bowlerFunc)\n        \n        } else {\n            updateSelectizeInput(session, 'bowler', choices = ttBowler, server = TRUE,selected=input$bowler)\n            updateSelectizeInput(session, 'bowlerFunc', choices = funcs1TT, server = TRUE,selected=input$bowlerFunc)\n        }\n        \n        analyzeBowler(input$bowler,input$bowlerFunc,input$matchType1)\n        \n        \n    })\n    \n    output$relBatsmenPlot <- renderPlot({  \n        if(input$matchType3 == \"Test\"){\n            players <- c(\"tendulkar\",\"Dravid\",\"ponting\",\"sangakkara\")\n            updateSelectizeInput(session, 'batsmen', choices = players, server = TRUE,selected=input$batsmen)\n            updateSelectizeInput(session, 'batsmenFunc', choices = funcRelBat, server = TRUE,selected=input$batsmenFunc)\n            \n        } else {\n            players <- c(\"devilliers\",\"gayle\",\"sehwag\")\n            updateSelectizeInput(session, 'batsmen', choices = players, server = TRUE,selected=input$batsmen)\n            updateSelectizeInput(session, 'batsmenFunc', choices = funcRelBat, server = TRUE,selected=input$batsmenFunc)\n        }\n        \n        #cat(\"func\",input$batsmenFunc,\"\\n\")\n        #cat(\"Player\",input$batsmen,\"\\n\")\n        #file <- paste(input$player,\".csv\",sep=\"\")\n        #filesp <- paste(input$player,\"sp.csv\",sep=\"\")\n        #cat(file,\"\\n\")\n        \n        \n        if(length(input$batsmen != 0)){\n             relBatsmenPerf(input$batsmen,input$batsmenFunc,input$matchType3)\n        }\n        #updateSelectizeInput(session, 'player', choices = players, server = TRUE,selected=\"kumble\")\n        #updateSelectizeInput(session, 'func', choices = funcs1, server = TRUE,selected=\"Bowler's Avg Wickets at Ground\")\n        \n        \n        # If the user requested \"All' plot the combined plot else draw the barplot\n        \n    })\n    \n    # Set the drop down players, functions based on the match type\n    output$relBowlersPlot <- renderPlot({  \n        if(input$matchType4 == \"Test\"){\n            players <- c(\"murali\",\"warne\",\"kumble\")\n            updateSelectizeInput(session, 'bowlers', choices = players, server = TRUE,selected=input$bowlers)\n            updateSelectizeInput(session, 'bowlersFunc', choices = funcRelBowlTest, server = TRUE,selected=input$bowlersFunc)\n            \n        } else {\n            players <- c(\"johnson\",\"steyn\",\"southee\")\n            updateSelectizeInput(session, 'bowlers', choices = players, server = TRUE,selected=input$bowlers)\n            updateSelectizeInput(session, 'bowlersFunc', choices = funcRelBowlERODTT, server = TRUE,selected=input$bowlersFunc)\n        }\n        \n        \n        \n        \n        if(length(input$bowlers != 0)){\n            \n            relBowlersPerf(input$bowlers,input$bowlersFunc,input$matchType4)\n        }\n        \n\n        \n        \n        #updateSelectizeInput(session, 'player', choices = players, server = TRUE,selected=\"kumble\")\n        #updateSelectizeInput(session, 'func', choices = funcs1, server = TRUE,selected=\"Bowler's Avg Wickets at Ground\")\n        \n        \n        # If the user requested \"All' plot the combined plot else draw the barplot\n        \n    })\n    \n    \n})\n",
    "created" : 1448630217316.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "776134431",
    "id" : "7B3B528A",
    "lastKnownWriteTime" : 1448641000,
    "path" : "C:/software/R/sixer/server.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}